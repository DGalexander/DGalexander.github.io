---
layout: post
subtitle: "Analysis of twitteR '#peakdistrict'"
date: "2016-04-09 14:18:00 +0800"
published: true
title: Quantifying visitor sentiment for a National Park
---
## Why access twitter?

Current **customer relationship management (CRM)** systems create customer profiles based on demographics, past buying patterns and other interactions or actions. Monitoring and quantifying interactions of customers with large areas of landscape such as National Parks with regular comprehensive visitor surveying is costly and prohibitively expensive. 

The emergance of both **social media mining (SMM)**, other data scienece methods and applications have provided us with the tools to access this information. This provides a great opportunity to develop CRM knowledge and monitoring. 

SMM is not without it's limitations. Preprocessing steps are required to remove the noise and error from the data. Due to the clutter, which is present in most unstructured data, removing the noise from data is difficult and not always sucesful. For the purpose of this analysis, not all tweets will contain sentiment, for example these could be factual or nonsensical.

## How is this done?

Created and app at <https://dev.twitter.com/apps> to access and reqest information from the Twitter
API. The _ROAuth_ package in R is used to allow the third party app to access the Twitter API.

The analysis then follows these steps:
1. Search and Clean Tweets
2. Estimate Sentiment (_Naive Algorithm_)
3. Estimate Sentiment (_Naive Bayes_)

## Search and Clean Tweets

For the purposes of obtainging sentiment of Twitter users we must gather data based on the term
'#peakdistrict'. 

'PDNP_Tweets = searchTwitter("peakdistrict", n = 10000, lang="en")'

Tweets returned are cleaned (4519 observations) based on following perameters (which provide 1310 
observations):

* Meta information usch as @people, URLs and #hashtags
* Punctuation marks, numbers and unnecessary spaces
* retweets (**RT**) not useful for sentiment analysis

## Estimating Sentiment

As mentioned earlier, some Tweets will be , factual, nonesenical or specific such as customer care
resonses. This analysis has not attempted to remove tweets from the data. 

### _Naive Algorithm_ 

The Naive algorithm gives a score based on the number of times a postive of negative word occured
in the given sentence (or Tweet). To do this, the positive and negative _opinion lexicon_ is 
[downloaded](http://www.cs.uic.edu/~liub/FBS/opinion-lexicon-English.rar). This is based on nearly 
68,000 words from the English Language and words categorised to be positive or negative.

Using a simple matching algorithm a _sentiment score_ can be computed. This boolean match of each
word is done for each Tweet, the total positive sentiment score minus the total negative sentiment 
score.

```{r}

```

From the observations, it is clear this 

### _Naive Bayes_

One of the key problems of analytics is to classify entities or events based on a knowledge of their 
attributes. Rather than a simple matching of opinion lexicon, the [_Naive Bayes_](https://en.wikipedia.org/wiki/Bayes%27_theorem)
method helps decide on and classify a series of emotionions present in each Tweet.This uses the 
'Rstem' and 'Sentiment' package. The 'Sentiment' package was built to use a _trained_ dataset of
emotion words (approximatley 1,500). Results can then be generated belonging to one of six emotions:
**anger**, **disgust**, **fear**, **joy**, **sadness** and **surprise**. Not all tweets will contain
data to fit these categories and get disregarded from the analysis.

<!--html_preserve--><div id="plot_id527406125-container" class="ggvis-output-container">
<div id="plot_id527406125" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id527406125_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id527406125" data-renderer="svg">SVG</a>
 | 
<a id="plot_id527406125_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id527406125" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id527406125_download" class="ggvis-download" data-plot-id="plot_id527406125">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id527406125_spec = {
    "data": [
        {
            "name": "mtcars0/bin1/stack2",
            "format": {
                "type": "csv",
                "parse": {
                    "xmin_": "number",
                    "xmax_": "number",
                    "stack_upr_": "number",
                    "stack_lwr_": "number"
                }
            },
            "values": "\"xmin_\",\"xmax_\",\"stack_upr_\",\"stack_lwr_\"\n9.5,10.5,2,0\n10.5,11.5,0,0\n11.5,12.5,0,0\n12.5,13.5,1,0\n13.5,14.5,1,0\n14.5,15.5,5,0\n15.5,16.5,2,0\n16.5,17.5,1,0\n17.5,18.5,2,0\n18.5,19.5,3,0\n19.5,20.5,1,0\n20.5,21.5,5,0\n21.5,22.5,0,0\n22.5,23.5,2,0\n23.5,24.5,1,0\n24.5,25.5,0,0\n25.5,26.5,1,0\n26.5,27.5,1,0\n27.5,28.5,0,0\n28.5,29.5,0,0\n29.5,30.5,2,0\n30.5,31.5,0,0\n31.5,32.5,1,0\n32.5,33.5,0,0\n33.5,34.5,1,0"
        },
        {
            "name": "scale/x",
            "format": {
                "type": "csv",
                "parse": {
                    "domain": "number"
                }
            },
            "values": "\"domain\"\n8.25\n35.75"
        },
        {
            "name": "scale/y",
            "format": {
                "type": "csv",
                "parse": {
                    "domain": "number"
                }
            },
            "values": "\"domain\"\n0\n5.25"
        }
    ],
    "scales": [
        {
            "name": "x",
            "domain": {
                "data": "scale/x",
                "field": "data.domain"
            },
            "zero": false,
            "nice": false,
            "clamp": false,
            "range": "width"
        },
        {
            "name": "y",
            "domain": {
                "data": "scale/y",
                "field": "data.domain"
            },
            "zero": false,
            "nice": false,
            "clamp": false,
            "range": "height"
        }
    ],
    "marks": [
        {
            "type": "rect",
            "properties": {
                "update": {
                    "stroke": {
                        "value": "#000000"
                    },
                    "fill": {
                        "value": "#333333"
                    },
                    "x": {
                        "scale": "x",
                        "field": "data.xmin_"
                    },
                    "x2": {
                        "scale": "x",
                        "field": "data.xmax_"
                    },
                    "y": {
                        "scale": "y",
                        "field": "data.stack_upr_"
                    },
                    "y2": {
                        "scale": "y",
                        "field": "data.stack_lwr_"
                    }
                },
                "ggvis": {
                    "data": {
                        "value": "mtcars0/bin1/stack2"
                    }
                }
            },
            "from": {
                "data": "mtcars0/bin1/stack2"
            }
        }
    ],
    "width": 450,
    "height": 300,
    "legends": [

    ],
    "axes": [
        {
            "type": "x",
            "scale": "x",
            "orient": "bottom",
            "layer": "back",
            "grid": true,
            "title": "mpg"
        },
        {
            "type": "y",
            "scale": "y",
            "orient": "left",
            "layer": "back",
            "grid": true,
            "title": "count"
        }
    ],
    "padding": null,
    "ggvis_opts": {
        "keep_aspect": false,
        "resizable": true,
        "padding": {

        },
        "duration": 250,
        "renderer": "svg",
        "hover_duration": 0,
        "width": 450,
        "height": 300
    },
    "handlers": null
}
;
ggvis.getPlot("plot_id527406125").parseSpec(plot_id527406125_spec);
</script><!--/html_preserve-->
